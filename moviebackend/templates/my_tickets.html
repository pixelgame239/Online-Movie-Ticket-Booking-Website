{% extends "base.html" %}

{% block title %}V√© c·ªßa t√¥i - R·∫°p Vi·ªát Nam{% endblock %}

{% block content %}
  <h2 style="text-align:center; font-size:32px; margin:40px 0; font-weight:700;">
    üéü V√© c·ªßa t√¥i
  </h2>

  {% if bookings %}
    {% for booking in bookings %}
      <div style="width:80%; margin:20px auto; padding:20px; border:1px solid #ddd; border-radius:10px;">
        <h3 style="margin-bottom:10px; font-size:24px; color:#E52025;">
          Booking #{{ booking.id }} - {{ booking.showtime.movie.title }}
        </h3>
        <p><strong>R·∫°p:</strong> {{ booking.showtime.cinema.name }}</p>
        <p><strong>Gi·ªù chi·∫øu:</strong> {{ booking.showtime.show_time }}</p>
        <p><strong>T·ªïng ti·ªÅn:</strong> {{ booking.total_price }} VNƒê</p>
        <p><strong>Tr·∫°ng th√°i:</strong> {{ booking.status }}</p>

        <h4>Danh s√°ch gh·∫ø ƒë√£ ƒë·∫∑t: {{ booking.seats_booked|join:", " }}</h4>
          {% if booking.status == 'pending' %}
          <div style="display: flex; justify-content: end; gap: 15px;">
            <form method="POST" action="{% url 'bookings:cancel_booking' %}" onsubmit="return confirmCancel();">
                {% csrf_token %}
                <input type="hidden" name="showtime_id" value="{{ booking.showtime.id }}">
                <input type="hidden" name="booking_id" value="{{ booking.id }}">
                <button type="submit" style="background-color: red; color: white; padding: 10px 15px; border: none; cursor: pointer;">Hu·ª∑</button>
            </form>
            <form method="GET" action="{% url 'bookings:select_seats' booking.showtime.id %}">
              <button type="submit" style="background-color: rgb(0, 81, 255); color: white; padding: 10px 15px; border: none; cursor: pointer;">S·ª≠a</button>
            </form>
          </div>
          {% endif %}
      </div>
      
    {% endfor %}
    <script>
      function confirmCancel() {
          return confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën hu·ª∑ ƒë·∫∑t v√© n√†y?");
      }
</script>
  {% else %}
    <p style="text-align:center; font-size:20px; color:#666; margin:60px 0;">
      B·∫°n ch∆∞a c√≥ v√© n√†o.
    </p>
  {% endif %}
{% endblock %}
