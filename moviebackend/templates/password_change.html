{% extends "base.html" %}
{% load static %}

{% block title %}Cài đặt mật khẩu - Rạp Việt Nam{% endblock %}

{% block content %}
<style>
  .profile-container {
    display: flex;
    max-width: 1200px;
    margin: 40px auto;
    gap: 40px;
  }

  /* Sidebar */
  .profile-sidebar {
    width: 250px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .profile-sidebar button {
    background: #E5E5E5;
    border: none;
    padding: 12px;
    font-size: 16px;
    text-align: left;
    cursor: pointer;
  }

  .profile-sidebar .active {
    background: #E52025;
    color: white;
    font-weight: bold;
  }

  /* Main content */
  .profile-main {
    flex: 1;
  }

  .profile-main h2 {
    background: #000;
    color: #fff;
    padding: 10px;
    margin-bottom: 20px;
  }

  .messages {
    margin-bottom: 20px;
  }
  .messages .success {
    background: #d4edda;
    color: #155724;
    padding: 10px;
    border-radius: 4px;
    margin-bottom: 10px;
  }
  .messages .error {
    background: #f8d7da;
    color: #721c24;
    padding: 10px;
    border-radius: 4px;
    margin-bottom: 10px;
  }

  .edit-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px 30px;
    font-size: 15px;
  }

  .edit-form label {
    font-weight: bold;
    display: block;
    margin-bottom: 6px;
  }

  .edit-form input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  .edit-form .full-width {
    grid-column: span 2;
  }

  .errorlist {
    color: #d9534f;
    font-size: 14px;
    margin-top: 5px;
    list-style: none;
    padding-left: 0;
  }

  .submit-btn {
    margin-top: 20px;
    background: #E52025;
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 16px;
  }
</style>

<div class="profile-container">
  <!-- Sidebar -->
  <div class="profile-sidebar">
    <a href="{% url 'users:profile' %}"><button>THÔNG TIN CHUNG</button></a>
    <a href="{% url 'users:profile_edit' %}"><button>CHI TIẾT TÀI KHOẢN</button></a>
    <a href="{% url 'users:password_change' %}"><button class="active">CÀI ĐẶT MẬT KHẨU</button></a>
    <button>THẺ THÀNH VIÊN</button>
    <button>ĐIỂM THƯỞNG</button>
    <button>THẺ QUÀ TẶNG</button>
    <button>VOUCHER</button>
    <button>COUPON</button>
    <button>LỊCH SỬ GIAO DỊCH</button>
  </div>

  <!-- Main content -->
  <div class="profile-main">
    <h2>CÀI ĐẶT MẬT KHẨU</h2>

    <!-- Thông báo -->
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" class="edit-form">
      {% csrf_token %}

      <div class="full-width">
        <label for="id_old_password">Mật khẩu hiện tại</label>
        {{ form.old_password }}
        {{ form.old_password.errors }}
      </div>


        <div class="mb-3">
        <label for="{{ form.new_password1.id_for_label }}">Mật khẩu mới</label>
        {{ form.new_password1 }}
        {{ form.new_password1.errors }}
        <ul class="text-muted small">
            {% for requirement in password_requirements %}
            <li>{{ requirement }}</li>
            {% endfor %}
        </ul>
        </div>

      <div>
        <label for="id_new_password2">Xác nhận mật khẩu mới</label>
        {{ form.new_password2 }}
        {{ form.new_password2.errors }}
      </div>

      <div class="full-width">
        <button type="submit" class="submit-btn">Lưu mật khẩu</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
