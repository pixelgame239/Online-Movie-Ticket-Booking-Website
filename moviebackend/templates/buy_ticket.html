{% extends 'base.html' %}
{% load static %}

{% block title %}Đặt vé - {{ movie.title }}{% endblock %}

{% block content %}
<div class="container" style="padding: 40px 20px; max-width: 900px; margin: 0 auto;">
  <h2 style="font-size: 28px; font-weight: 700; color: #E52025; text-align: center;">
    Đặt vé: {{ movie.title }}
  </h2>

  <!-- Cinema Selector -->
  <div style="margin-top: 30px; text-align: center;">
    <h3 style="margin-bottom: 15px;">Chọn rạp chiếu:</h3>
    {% if cinemas %}
      {% for cinema in cinemas %}
        <a href="?cinema={{ cinema.id }}"
           style="display: inline-block;
                  margin: 6px;
                  padding: 10px 16px;
                  background-color: {% if cinema.id == selected_cinema_id %}#E52025{% else %}#666{% endif %};
                  color: white;
                  text-decoration: none;
                  border-radius: 5px;
                  font-weight: 500;">
          {{ cinema.name }}
        </a>
      {% endfor %}
    {% else %}
      <p>Hiện tại không có rạp nào chiếu phim này.</p>
    {% endif %}
  </div>

  <!-- Showtime List -->
  <div style="margin-top: 40px;">
    <h3 style="text-align: center; margin-bottom: 20px;">Suất chiếu sắp tới:</h3>

    {% if showtimes %}
      <ul style="list-style: none; padding: 0;">
        {% for showtime in showtimes %}
          <li style="margin-bottom: 15px; padding: 15px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 6px;">
            <strong>Suất chiếu:</strong>
            {{ showtime.show_time|date:"H:i - d/m/Y" }}
            <br>
            <strong>Rạp:</strong> {{ showtime.cinema.name }}
            <br>
            <a href="{% url 'bookings:select_seats' showtime.id %}"
               style="margin-top: 8px; display: inline-block; padding: 8px 12px; background-color: #E52025; color: white; text-decoration: none; border-radius: 5px;">
              Chọn ghế & Đặt vé
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p style="text-align: center; color: #888;">Chưa có suất chiếu sắp tới cho rạp này.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
