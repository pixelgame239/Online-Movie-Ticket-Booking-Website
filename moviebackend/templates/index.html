{% extends 'base.html' %}
{% load static %}
{% block title %}Trang ch·ªß{% endblock %}

{% block content %}
  <!-- Slider -->
  <div class="slider" style="position:relative; width:100%; max-height:500px; overflow:hidden; margin-bottom:50px;">
    {% for slide in slides %}
      <div class="slide {% if forloop.first %}active{% endif %}" style="display:none;">
        <img src="{{ slide.image.url }}" alt="{{ slide.title }}" style="width:100%; height:500px; object-fit:cover;">
      </div>
    {% empty %}
      <div class="slide active">
        <img src="{% static 'images/default_banner.png' %}" alt="Banner m·∫∑c ƒë·ªãnh" style="width:100%; height:500px; object-fit:cover;">
      </div>
    {% endfor %}
    <button class="prev" style="position:absolute; top:50%; left:20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:#fff; border:none; font-size:24px; cursor:pointer; padding:10px 15px;">&#10094;</button>
    <button class="next" style="position:absolute; top:50%; right:20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:#fff; border:none; font-size:24px; cursor:pointer; padding:10px 15px;">&#10095;</button>
  </div>

  <!-- Now Showing -->
  <section class="movies" style="margin-bottom:60px;">
    <h2 style="font-size:28px; font-weight:700; color:#E52025; margin-bottom:25px; text-align:center;">üé¨ PHIM ƒêANG V√Ä S·∫ÆP CHI·∫æU</h2>
    <div class="carousel" style="display:flex; align-items:center; gap:15px;">
      <button class="prev">&#10094;</button>
      <div class="movie-list" style="display:flex; gap:20px; overflow-x:auto; scroll-behavior:smooth;">
        {% for movie in movies_now_showing %}
          <div class="movie-card" style="min-width:220px; border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff; box-shadow:0 3px 6px rgba(0,0,0,0.1);">
            <span class="tag" style="position:absolute; background:#E52025; color:#fff; padding:5px 10px; font-size:14px; font-weight:600; border-radius:0 0 6px 0;">
              {{ movie.rating }}
            </span>
            {% if movie.poster %}
              <img src="{{ movie.poster.url }}" alt="{{ movie.title }}" style="width:100%; height:320px; object-fit:cover;">
            {% else %}
              <div style="width:100%; height:320px; background:#eee; display:flex; align-items:center; justify-content:center;">No Poster</div>
            {% endif %}
            <div class="info" style="padding:10px; text-align:center;">
              <p style="font-size:16px; font-weight:600; margin-bottom:10px;">{{ movie.title }}</p>
              <a href="{% url 'movies:movie_detail' movie.id %}" class="btn-detail" style="display:inline-block; margin:5px; padding:8px 12px; background:#E52025; color:#fff; border-radius:6px; text-decoration:none;">Xem chi ti·∫øt</a>
              <a href="{% url 'bookings:buy_ticket' movie.id %}" class="btn-ticket" style="display:inline-block; margin:5px; padding:8px 12px; background:#000; color:#fff; border-radius:6px; text-decoration:none;">Mua v√©</a>
            </div>
          </div>
        {% empty %}
          <p>Ch∆∞a c√≥ phim n√†o ƒëang v√† s·∫Øp chi·∫øu.</p>
        {% endfor %}
      </div>
      <button class="next">&#10095;</button>
    </div>
  </section>

  <!-- Hot Movies -->
  <section class="movies">
    <h2 style="font-size:28px; font-weight:700; color:#E52025; margin-bottom:25px; text-align:center;">üî• PHIM HOT</h2>
    <div class="carousel" style="display:flex; align-items:center; gap:15px;">
      <button class="prev">&#10094;</button>
      <div class="movie-list" style="display:flex; gap:20px; overflow-x:auto; scroll-behavior:smooth;">
        {% for movie in movies_hot %}
          <div class="movie-card" style="min-width:220px; border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff; box-shadow:0 3px 6px rgba(0,0,0,0.1);">
            <span class="tag" style="position:absolute; background:#E52025; color:#fff; padding:5px 10px; font-size:14px; font-weight:600; border-radius:0 0 6px 0;">
              {{ movie.rating }}
            </span>
            {% if movie.poster %}
              <img src="{{ movie.poster.url }}" alt="{{ movie.title }}" style="width:100%; height:320px; object-fit:cover;">
            {% else %}
              <div style="width:100%; height:320px; background:#eee; display:flex; align-items:center; justify-content:center;">No Poster</div>
            {% endif %}
            <div class="info" style="padding:10px; text-align:center;">
              <p style="font-size:16px; font-weight:600; margin-bottom:10px;">{{ movie.title }}</p>
              <a href="{% url 'movies:movie_detail' movie.id %}" class="btn-detail" style="display:inline-block; margin:5px; padding:8px 12px; background:#E52025; color:#fff; border-radius:6px; text-decoration:none;">Xem chi ti·∫øt</a>
              {% if movie.id in movie_id_up_next %}
              <a href="{% url 'bookings:buy_ticket' movie.id %}" class="btn-ticket" style="display:inline-block; margin:5px; padding:8px 12px; background:#000; color:#fff; border-radius:6px; text-decoration:none;">Mua v√©</a>
              {% endif %}
            </div>
          </div>
        {% empty %}
          <p>Ch∆∞a c√≥ phim hot n√†o.</p>
        {% endfor %}
      </div>
      <button class="next">&#10095;</button>
    </div>
  </section>
{% endblock %}
