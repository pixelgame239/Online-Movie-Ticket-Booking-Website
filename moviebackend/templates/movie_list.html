{% extends "base.html" %}

{% block title %}Danh s√°ch phim - R·∫°p Vi·ªát Nam{% endblock %}

{% block content %}
  <div style="width:90%; margin:40px auto;">
    <!-- Thanh t√¨m ki·∫øm + l·ªçc -->
    <form method="get" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:40px; gap:20px;">
      <input type="text" name="q" value="{{ request.GET.q }}" placeholder="T√¨m t√™n phim..."
             style="flex:1; padding:12px 15px; font-size:16px; border:1px solid #ccc; border-radius:6px;">
      
      <select name="genre" style="padding:12px 15px; font-size:16px; border:1px solid #ccc; border-radius:6px;">
        <option value="">-- Th·ªÉ lo·∫°i --</option>
        <option value="H√†nh ƒë·ªông" {% if request.GET.genre == "H√†nh ƒë·ªông" %}selected{% endif %}>H√†nh ƒë·ªông</option>
        <option value="T√¨nh c·∫£m" {% if request.GET.genre == "T√¨nh c·∫£m" %}selected{% endif %}>T√¨nh c·∫£m</option>
        <option value="H√†i" {% if request.GET.genre == "H√†i" %}selected{% endif %}>H√†i</option>
        <option value="Kinh d·ªã" {% if request.GET.genre == "Kinh d·ªã" %}selected{% endif %}>Kinh d·ªã</option>
      </select>

      <button type="submit" 
              style="padding:12px 25px; background:#E52025; color:#fff; border:none; border-radius:6px; font-size:16px; font-weight:600; cursor:pointer;">
        T√¨m ki·∫øm
      </button>
    </form>

    <!-- Ti√™u ƒë·ªÅ -->
    <h2 style="text-align:center; font-size:32px; margin-bottom:30px; font-weight:700; color:#E52025;">
      üé¨ Danh s√°ch phim
    </h2>

    <!-- Danh s√°ch phim -->
    {% if movies %}
      <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:30px;">
        {% for movie in movies %}
          <div style="border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff; box-shadow:0 3px 6px rgba(0,0,0,0.1); transition:transform .2s;">
            <!-- Poster -->
            <a href="{% url 'movies:movie_detail' movie.id %}">
              {% if movie.poster %}
                <img src="{{ movie.poster.url }}" alt="{{ movie.title }}" 
                     style="width:100%; height:350px; object-fit:cover;">
              {% else %}
                <div style="width:100%; height:350px; display:flex; justify-content:center; align-items:center; background:#f5f5f5; color:#666;">
                  No Poster
                </div>
              {% endif %}
            </a>

            <!-- Th√¥ng tin -->
            <div style="padding:15px;">
              <h3 style="font-size:20px; margin-bottom:10px; font-weight:700;">
                <a href="{% url 'movies:movie_detail' movie.id %}" style="text-decoration:none; color:#000;">
                  {{ movie.title }}
                </a>
              </h3>
              <p style="font-size:15px; color:#444; margin-bottom:6px;"><strong>Th·ªÉ lo·∫°i:</strong> {{ movie.genre }}</p>
              <p style="font-size:15px; color:#444; margin-bottom:6px;"><strong>Th·ªùi l∆∞·ª£ng:</strong> {{ movie.duration }} ph√∫t</p>
              <p style="font-size:15px; color:#444; margin-bottom:12px;"><strong>Kh·ªüi chi·∫øu:</strong> {{ movie.release_date }}</p>

              <a href="{% url 'movies:movie_detail' movie.id %}" 
                 style="display:inline-block; padding:8px 16px; background:#E52025; color:#fff; text-decoration:none; border-radius:5px; font-size:15px; font-weight:600;">
                Xem chi ti·∫øt
              </a>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p style="text-align:center; font-size:20px; color:#666; margin-top:60px;">
        Hi·ªán t·∫°i ch∆∞a c√≥ phim n√†o.
      </p>
    {% endif %}
  </div>
{% endblock %}
